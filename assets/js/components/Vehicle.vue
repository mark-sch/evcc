<template>
	<div class="pt-3 pb-2">
		<div class="mb-3">
			<span>{{ socTitle || "&nbsp;" }}</span>
			<span v-if="range >= 0" class="text-muted">/ {{ range }} km</span>
		</div>
		<VehicleSoc v-bind="vehicleSoc" @target-soc-updated="targetSocUpdated" />
		<VehicleSubline
			v-bind="vehicleSubline"
			@target-time-updated="targetTimeUpdated"
			class="my-1"
		/>
	</div>
</template>

<script>
import collector from "../mixins/collector";

import VehicleSoc from "./VehicleSoc";
import VehicleSubline from "./VehicleSubline";

export default {
	name: "Vehicle",
	components: { VehicleSoc, VehicleSubline },
	props: {
		connected: Boolean,
		hasVehicle: Boolean,
		hasPriority: Boolean,
		socCharge: Number,
		enabled: Boolean,
		charging: Boolean,
		minSoC: Number,
		range: Number,
		socTitle: String,
		timerActive: Boolean,
		timerSet: Boolean,
		targetTime: String,
		targetSoC: Number,
	},
	data: function () {
		return {
			selectedTargetSoC: null,
		};
	},
	computed: {
		vehicleSoc: function () {
			return this.collectProps(VehicleSoc);
		},
		vehicleSubline: function () {
			return this.collectProps(VehicleSubline);
		},
		priorityActive: function () {
			return this.hasPriority;
		},
	},
	methods: {
		targetSocUpdated: function (targetSoC) {
			this.$emit("target-soc-updated", targetSoC);
		},
		targetTimeUpdated: function (targetTime) {
			this.$emit("target-time-updated", targetTime);
		},
	},
	mixins: [collector],
};
</script>
